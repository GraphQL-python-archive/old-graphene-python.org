<!DOCTYPE html>
 <html><head><link rel="canonical" href="http://docs.graphene-python.org/projects/django/en/latest/filtering/" /><meta HTTP-EQUIV="refresh" CONTENT="0;URL=http://docs.graphene-python.org/projects/django/en/latest/filtering/"><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0"/><title>Filtering - Graphene</title><link rel="shortcut icon" href="/favicon.png"/><link href="https://fonts.googleapis.com/css?family=Raleway:400,600,200,100" rel="stylesheet" type="text/css"/><link href="/app.css" rel="stylesheet" type="text/css"/></head><body><div id="react-mount"><div data-reactroot="" data-reactid="1" data-react-checksum="16838403"><div data-reactid="2"><div class="bm-overlay" style="position:fixed;z-index:1;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;transform:translate3d(-100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s;" data-reactid="3"></div><div id="" class="bm-menu-wrap" style="position:fixed;right:0;z-index:2;width:200px;height:100%;transform:translate3d(220px, 0, 0);transition:transform 0.4s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid="4"><div class="bm-menu" style="height:100%;box-sizing:border-box;" data-reactid="5"><nav class="bm-item-list" style="height:100%;" data-reactid="6"><span style="display:block;outline:none;transform:translate3d(0, 500px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid="7"><a href="/playground/" data-reactid="8">Try it out</a></span><span style="display:block;outline:none;transform:translate3d(0, 1000px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid="9"><a class="active" href="/docs/quickstart/" data-reactid="10">Docs</a></span><span style="display:block;outline:none;transform:translate3d(0, 1500px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid="11"><a href="/community/" data-reactid="12">Community</a></span><a href="https://github.com/graphql-python/graphene/" style="display:block;outline:none;transform:translate3d(0, 2000px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid="13">Github</a></nav></div><div data-reactid="14"><div data-reactid="15"><span class="bm-cross" style="position:absolute;width:3px;height:14px;top:14px;right:18px;cursor:pointer;transform:rotate(45deg);z-index:1;" data-reactid="16"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;top:14px;right:18px;cursor:pointer;transform:rotate(-45deg);z-index:1;" data-reactid="17"></span><button style="width:14px;height:14px;position:absolute;right:13px;top:14px;padding:0;overflow:hidden;text-indent:14px;font-size:14px;border:none;background:transparent;color:transparent;outline:none;z-index:1;" data-reactid="18">Close Menu</button></div></div></div><div class="bm-burger-button" style="z-index:1;" data-reactid="19"><span data-reactid="20"><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1;" data-reactid="21"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1;" data-reactid="22"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1;" data-reactid="23"></span></span><button style="position:absolute;left:0;right:0;top:0;bottom:0;margin:0;padding:0;border:none;font-size:14px;color:transparent;background:transparent;outline:none;" data-reactid="24">Open Menu</button></div></div><header class="header" data-reactid="25"><div class="header-wrapper" data-reactid="26"><a class="header-logo" href="/" data-reactid="27"><span data-reactid="28"><svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="logo"><g fill="none" fill-rule="evenodd"><path class="logo-path" d="M49.17 10.915L15.415 30.29l.058 39.252 34.633 20.082 33.345-18.95-.023-39.79-34.185 19.238" stroke="white" stroke-width="4.987"/>
    <g transform="translate(41.5 3)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(8 22.482)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(8 62.33)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(42.382 81.813)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(75.882 62.33)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(75.882 22.482)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(42.382 41.964)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    </g>
</svg>
</span><!-- react-text: 29 -->Graphene<!-- /react-text --></a><nav class="header-nav" data-reactid="30"><a href="/playground/" data-reactid="31">Try it out</a><a class="active" href="/docs/quickstart/" data-reactid="32">Docs</a><a href="/community/" data-reactid="33">Community</a><a href="https://github.com/graphql-python/graphene/" data-reactid="34">Github</a></nav></div></header><div data-reactid="35"><div class="page-title" data-reactid="36"><h1 data-reactid="37">Documentation</h1></div><div class="docs" data-reactid="38"><aside class="docs-aside" data-reactid="39"><div class="docs-aside-group" data-reactid="40"><h3 data-reactid="41">Quickstart</h3><a href="/docs/quickstart/" data-reactid="42">Getting started</a></div><div class="docs-aside-group" data-reactid="43"><h3 data-reactid="44">Walkthrough</h3><a href="/docs/interfaces/" data-reactid="45">Interfaces</a><a href="/docs/objecttypes/" data-reactid="46">ObjectTypes</a><a href="/docs/resolvers/" data-reactid="47">Resolvers</a><a href="/docs/mutations/" data-reactid="48">Mutations</a><a href="/docs/basic-types/" data-reactid="49">Basic Types</a><a href="/docs/enums/" data-reactid="50">Enums</a><a href="/docs/relay/" data-reactid="51">Relay</a><a href="/docs/middleware/" data-reactid="52">Middleware</a></div><div class="docs-aside-group" data-reactid="53"><h3 data-reactid="54">Django</h3><a href="/docs/django/tutorial/" data-reactid="55">Quickstart</a><a href="/docs/django/filtering/" class="active" data-reactid="56">Filtering</a><a href="/docs/django/authorization/" data-reactid="57">Authorization</a><a href="/docs/django/introspection-schema/" data-reactid="58">Introspection Schema</a><a href="/docs/django/debug/" data-reactid="59">Django Debug Middleware</a></div><div class="docs-aside-group" data-reactid="60"><h3 data-reactid="61">SQLAlchemy</h3><a href="/docs/sqlalchemy/tutorial/" data-reactid="62">Tutorial</a><a href="/docs/sqlalchemy/tips/" data-reactid="63">Tips</a></div><select class="docs-aside-navselect" data-reactid="64"><optgroup label="Quickstart" data-reactid="65"><option value="/docs/quickstart/" data-reactid="66">Getting started</option></optgroup><optgroup label="Walkthrough" data-reactid="67"><option value="/docs/interfaces/" data-reactid="68">Interfaces</option><option value="/docs/objecttypes/" data-reactid="69">ObjectTypes</option><option value="/docs/resolvers/" data-reactid="70">Resolvers</option><option value="/docs/mutations/" data-reactid="71">Mutations</option><option value="/docs/basic-types/" data-reactid="72">Basic Types</option><option value="/docs/enums/" data-reactid="73">Enums</option><option value="/docs/relay/" data-reactid="74">Relay</option><option value="/docs/middleware/" data-reactid="75">Middleware</option></optgroup><optgroup label="Django" data-reactid="76"><option value="/docs/django/tutorial/" data-reactid="77">Quickstart</option><option selected="" value="/docs/django/filtering/" data-reactid="78">Filtering</option><option value="/docs/django/authorization/" data-reactid="79">Authorization</option><option value="/docs/django/introspection-schema/" data-reactid="80">Introspection Schema</option><option value="/docs/django/debug/" data-reactid="81">Django Debug Middleware</option></optgroup><optgroup label="SQLAlchemy" data-reactid="82"><option value="/docs/sqlalchemy/tutorial/" data-reactid="83">Tutorial</option><option value="/docs/sqlalchemy/tips/" data-reactid="84">Tips</option></optgroup></select></aside><div class="docs-content" data-reactid="85"><div data-reactid="86"><div class="markdown" data-reactid="87"><div data-reactid="88"><h1>Filtering</h1>
<p>Graphene integrates with <a href="https://django-filter.readthedocs.org">django-filter</a>
to provide filtering of results. See the
<a href="https://django-filter.readthedocs.org/en/latest/usage.html#the-filter">usage documentation</a>
for details on the format for <code>filter_fields</code>.</p>
<p>This filtering is only available when using the Django integrations
(i.e. nodes which extend <code>DjangoNode</code>). Additionally <code>django-filter</code>
is an optional dependency of Graphene. You will need to
install it manually, which can be done as follows:</p>
<pre><code class="language-bash"><span class="hljs-comment"># You'll need to django-filter</span>
pip install django-filter
</code></pre>
<p><strong>Note: The techniques below are demoed in the
<a href="https://github.com/graphql-python/graphene/tree/master/examples/cookbook_django">cookbook example app</a>.</strong></p>
<h2>Filterable fields</h2>
<p>The <code>filter_fields</code> parameter is used to specify the fields which can be filtered upon.
The value specified here is passed directly to <code>django-filter</code>, so see the
<a href="https://django-filter.readthedocs.org/en/latest/usage.html#the-filter">filtering documentation</a>
for full details on the range of options available.</p>
<p>For example:</p>
<pre><code class="language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimalNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        <span class="hljs-comment"># Assume you have an Animal model defined with the following fields</span>
        model = Animal
        filter_fields = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'genus'</span>, <span class="hljs-string">'is_domesticated'</span>]

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Query</span><span class="hljs-params">(ObjectType)</span>:</span>
    animal = relay.NodeField(AnimalNode)
    all_animals = DjangoFilterConnectionField(AnimalNode)
</code></pre>
<p>You could then perform a query such as:</p>
<pre><code class="language-graphql"><span class="hljs-selector-tag">query</span> {
  # <span class="hljs-selector-tag">Note</span> <span class="hljs-selector-tag">that</span> <span class="hljs-selector-tag">fields</span> <span class="hljs-selector-tag">names</span> <span class="hljs-selector-tag">become</span> <span class="hljs-selector-tag">camelcased</span>
  <span class="hljs-selector-tag">allAnimals</span>(<span class="hljs-attribute">genus</span>: <span class="hljs-string">"cat"</span>, <span class="hljs-attribute">isDomesticated</span>: true) {
    <span class="hljs-selector-tag">edges</span> {
      <span class="hljs-selector-tag">node</span> {
        id,
        name
      }
    }
  }
}
</code></pre>
<p>You can also make more complex lookup types available:</p>
<pre><code class="language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimalNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Animal
        <span class="hljs-comment"># Provide more complex lookup types</span>
        filter_fields = {
            <span class="hljs-string">'name'</span>: [<span class="hljs-string">'exact'</span>, <span class="hljs-string">'icontains'</span>, <span class="hljs-string">'istartswith'</span>],
            <span class="hljs-string">'genus'</span>: [<span class="hljs-string">'exact'</span>],
            <span class="hljs-string">'is_domesticated'</span>: [<span class="hljs-string">'exact'</span>],
        }
</code></pre>
<p>Which you could query as follows:</p>
<pre><code class="language-graphql"><span class="hljs-selector-tag">query</span> {
  # <span class="hljs-selector-tag">Note</span> <span class="hljs-selector-tag">that</span> <span class="hljs-selector-tag">fields</span> <span class="hljs-selector-tag">names</span> <span class="hljs-selector-tag">become</span> <span class="hljs-selector-tag">camelcased</span>
  <span class="hljs-selector-tag">allAnimals</span>(<span class="hljs-attribute">name_Icontains</span>: <span class="hljs-string">"lion"</span>) {
    <span class="hljs-selector-tag">edges</span> {
      <span class="hljs-selector-tag">node</span> {
        id,
        name
      }
    }
  }
}
</code></pre>
<h2>Orderable fields</h2>
<p>Ordering can also be specified using <code>filter_order_by</code>. Like <code>filter_fields</code>,
this value is also passed directly to <code>django-filter</code> as the <code>order_by</code> field.
For full details see the
<a href="https://django-filter.readthedocs.org/en/latest/usage.html#ordering-using-order-by">order_by documentation</a>.</p>
<p>For example:</p>
<pre><code class="language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimalNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Animal
        filter_fields = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'genus'</span>, <span class="hljs-string">'is_domesticated'</span>]
        <span class="hljs-comment"># Either a tuple/list of fields upon which ordering is allowed, or</span>
        <span class="hljs-comment"># True to allow filtering on all fields specified in filter_fields</span>
        filter_order_by = <span class="hljs-keyword">True</span>
</code></pre>
<p>You can then control the ordering via the <code>orderBy</code> argument:</p>
<pre><code class="language-graphql"><span class="hljs-selector-tag">query</span> {
  <span class="hljs-selector-tag">allAnimals</span>(<span class="hljs-attribute">orderBy</span>: <span class="hljs-string">"name"</span>) {
    <span class="hljs-selector-tag">edges</span> {
      <span class="hljs-selector-tag">node</span> {
        id,
        name
      }
    }
  }
}
</code></pre>
<h2>Custom Filtersets</h2>
<p>By default Graphene provides easy access to the most commonly used
features of <code>django-filter</code>. This is done by transparently creating a
<code>django_filters.FilterSet</code> class for you and passing in the values for
<code>filter_fields</code> and <code>filter_order_by</code>.</p>
<p>However, you may find this to be insufficient. In these cases you can
create your own <code>Filterset</code> as follows:</p>
<pre><code class="language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimalNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        <span class="hljs-comment"># Assume you have an Animal model defined with the following fields</span>
        model = Animal
        filter_fields = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'genus'</span>, <span class="hljs-string">'is_domesticated'</span>]


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimalFilter</span><span class="hljs-params">(django_filters.FilterSet)</span>:</span>
    <span class="hljs-comment"># Do case-insensitive lookups on 'name'</span>
    name = django_filters.CharFilter(lookup_type=<span class="hljs-string">'iexact'</span>)

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Animal
        fields = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'genus'</span>, <span class="hljs-string">'is_domesticated'</span>]


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Query</span><span class="hljs-params">(ObjectType)</span>:</span>
    animal = relay.NodeField(AnimalNode)
    <span class="hljs-comment"># We specify our custom AnimalFilter using the filterset_class param</span>
    all_animals = DjangoFilterConnectionField(AnimalNode,
                                              filterset_class=AnimalFilter)
</code></pre>
</div><a href="https://github.com/graphql-python/graphene/edit/master/docs/pages/docs/django/filtering.md" class="improve-document-link" data-reactid="89">Edit page</a></div></div><a class="docs-next" href="/docs/django/authorization/" data-reactid="90"><!-- react-text: 91 -->Next - <!-- /react-text --><!-- react-text: 92 -->Authorization<!-- /react-text --><!-- react-text: 93 --> →<!-- /react-text --></a></div></div></div></div></div><script src="/bundle.js"></script></body></html>